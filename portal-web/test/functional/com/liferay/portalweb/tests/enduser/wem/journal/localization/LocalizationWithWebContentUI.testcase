@component-name = "portal-wcm"
definition {

	property portal.release = "true";
	property portal.upstream = "true";
	property testray.main.component.name = "Web Content Administration";

	setUp {
		TestCase.setUpPortalInstance();

		User.firstLoginPG();

		JSONGroup.addGroup(groupName = "Test Site Name");

		JSONLayout.addPublicLayout(
			groupName = "Test Site Name",
			layoutName = "Test Page Name");
	}

	tearDown {
		var testPortalInstance = PropsUtil.get("test.portal.instance");

		if ("${testPortalInstance}" == "true") {
			PortalInstances.tearDownCP();
		}
		else {
			JSONGroup.deleteGroupByName(groupName = "Test Site Name");
		}
	}

	@priority = "5"
	test AddLocalizedWebContentViaSourceEditor {
		property portal.acceptance = "true";
		property test.name.skip.portal.instance = "LocalizationWithWebContentUI#AddLocalizedWebContentViaSourceEditor";
		property testray.component.names = "Training,Web Content Administration";

		JSONLayout.addWidgetToPublicLayout(
			groupName = "Test Site Name",
			layoutName = "Test Page Name",
			widgetName = "Web Content Display");

		Navigator.gotoSitePage(
			pageName = "Test Page Name",
			siteName = "Test Site Name");

		WebContentDisplayPortletNavigator.gotoAdd();

		WebContent.addCP(webContentTitle = "Basic S.P.A.C.E. Banner");

		CKEditor.addSourceContent(content = '''
<h2 class="text-center">Space Program Academy of Continuing Education</h2>

<p class="text-center">Dare to Dream out of this world</p>
''');

		Button.clickPublish();

		WaitForElementNotPresent(
			key_text = "Publish",
			locator1 = "Button#ANY");

		Navigator.gotoSitePage(
			pageName = "Test Page Name",
			siteName = "Test Site Name");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "Space Program Academy of Continuing Education Dare to Dream out of this world",
			webContentTitle = "Basic S.P.A.C.E. Banner");

		WebContentDisplayPortletNavigator.gotoEdit(
			menuItem = "Edit Web Content",
			webContentTitle = "Basic S.P.A.C.E. Banner");

		PortletEntry.changeLocale(locale = "ja-JP");

		WebContent.addCP(webContentTitle = "Basic S.P.A.C.E. Banner (Japanese Translation)");

		CKEditor.addContentInWebContent(
			content = "A Japanese translation of the basic front page banner",
			fieldLabel = "Description");

		CKEditor.addSourceContent(content = '''
<h2 class="text-center">Space Program 大学生涯教育</h2>

<p class="text-center">地球から、宇宙の果てへ</p>
''');

		Button.clickPublish();

		JSONLayout.addWidgetToPublicLayout(
			groupName = "Test Site Name",
			layoutName = "Test Page Name",
			widgetName = "Language Selector");

		Navigator.gotoSitePage(
			pageName = "Test Page Name",
			siteName = "Test Site Name");

		LanguagePortlet.selectLanguagePG(
			locale = "ja_JP",
			textIcon = "日本語-日本");

		Navigator.gotoSitePage(
			pageName = "Test Page Name",
			siteName = "Test Site Name");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "Space Program 大学生涯教育 地球から、宇宙の果てへ",
			webContentTitle = "Basic S.P.A.C.E. Banner (Japanese Translation)");

		Navigator.gotoSitePage(
			pageName = "Test Page Name",
			siteName = "Test Site Name");

		LanguagePortlet.selectLanguagePG(
			locale = "en_US",
			textIcon = "english-United States");

		Navigator.gotoSitePage(
			pageName = "Test Page Name",
			siteName = "Test Site Name");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "Space Program Academy of Continuing Education Dare to Dream out of this world",
			webContentTitle = "Basic S.P.A.C.E. Banner");

		AssertTextNotEquals(
			index = "1",
			locator1 = "WCD#WEB_CONTENT_CONTENT",
			value1 = "Space Program 大学生涯教育 地球から、宇宙の果てへ");
	}

	@description = "This test is assigned as usecase test for CKEditor and localization in LPS-141232."
	@priority = "5"
	test AddWCWithTranslation {
		property portal.acceptance = "true";
		property test.name.skip.portal.instance = "LocalizationWithWebContent#AddWCWithTranslation";
		property testray.component.names = "Localization,Web Content Administration,WYSIWYG";

		WebContentNavigator.openWebContentAdmin(siteURLKey = "test-site-name");

		WebContentNavigator.gotoAddCP();

		WebContent.addCP(
			webContentContent = "WC Content",
			webContentTitle = "WC Title");

		PortletEntry.changeLocale(locale = "es-ES");

		WebContent.addCP(
			webContentContent = "WC Contenido",
			webContentTitle = "WC Titulo");

		PortletEntry.publish();

		JSONLayout.addWidgetToPublicLayout(
			column = "1",
			groupName = "Test Site Name",
			layoutName = "Test Page Name",
			widgetName = "Language Selector");

		Navigator.gotoSitePage(
			pageName = "Test Page Name",
			siteName = "Test Site Name");

		WidgetPages.addRecentContent(assetTitle = "WC Title");

		LanguagePortlet.selectLanguagePG(
			locale = "es_ES",
			textIcon = "español-España");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "WC Contenido",
			webContentTitle = "WC Titulo");

		WebContentDisplayPortletNavigator.gotoEdit(
			menuItem = "Editar contenido web",
			webContentTitle = "WC Titulo");

		PortletEntry.changeLocale(locale = "es-ES");

		WebContent.viewCP(
			webContentContent = "WC Contenido",
			webContentTitle = "WC Titulo");
	}

	@priority = "4"
	test WebContentAdministrationLocalization {
		property test.name.skip.portal.instance = "LocalizationWithWebContentUI#WebContentAdministrationLocalization";
		property testray.component.names = "Localization,Web Content Administration";

		JSONLayout.addPublicLayout(
			groupName = "Test Site Name",
			layoutName = "Web Content Display Page");

		JSONLayout.addWidgetToPublicLayout(
			groupName = "Test Site Name",
			layoutName = "Web Content Display Page",
			widgetName = "Web Content Display");

		JSONLayout.addWidgetToPublicLayout(
			groupName = "Test Site Name",
			layoutName = "Web Content Display Page",
			widgetName = "Language Selector");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "test-site-name");

		NavItem.gotoStructures();

		LexiconEntry.gotoAdd();

		Pause(locator1 = "3000");

		WebContentStructures.addName(structureName = "WC Structure Name");

		Navigator.gotoSidebarTab(tabName = "Properties");

		PortletEntry.inputDescriptionTextInput(description = "WC Structure Description");

		WebContentStructures.addLocalization(
			locale = "fr-FR",
			locale2 = "zh-CN",
			localization1Name = "nom de la structure de wc",
			localization2Name = "wc 结构名称");

		DataEngine.addField(
			fieldFieldLabel = "Text",
			fieldName = "Text");

		WebContentStructures.saveCP(structureName = "WC Structure Name");

		WebContentNavigator.openWebContentAdmin(siteURLKey = "test-site-name");

		NavItem.gotoTemplates();

		WebContentTemplates.addCP(
			structureName = "WC Structure Name",
			templateDescription = "WC Template Description",
			templateFieldNames = "Text",
			templateName = "WC Template Name");

		WebContentTemplates.localizeTemplateName(
			locale = "fr-FR",
			locale2 = "zh-CN",
			localization1Name = "nom de la template de wc",
			localization2Name = "wc 模板名称",
			templateName = "WC Template Name");

		DDLDataDefinition.save();

		WebContentNavigator.openWebContentAdmin(siteURLKey = "test-site-name");

		WebContentNavigator.gotoAddWithStructureCP(structureName = "WC Structure Name");

		WebContent.addWithStructureCP(
			structureName = "WC Structure Name",
			templateName = "WC Template Name",
			webContentText = "WC WebContent Text",
			webContentTitle = "WC WebContent Title");

		PortletEntry.publish();

		WebContent.viewTitle(webContentTitle = "WC WebContent Title");

		WebContentNavigator.gotoEditCP(webContentTitle = "WC WebContent Title");

		PortletEntry.changeLocale(locale = "fr-FR");

		WebContent.addWithStructureCP(
			webContentText = "WC contenu WebContent",
			webContentTitle = "WC WebContent Titre");

		PortletEntry.publish();

		Navigator.gotoSitePage(
			pageName = "Web Content Display Page",
			siteName = "Test Site Name");

		WebContentDisplayPortlet.selectWebContent(webContentTitle = "WC WebContent Title");

		Navigator.gotoSitePage(
			pageName = "Web Content Display Page",
			siteName = "Test Site Name");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "WC WebContent Text",
			webContentTitle = "WC WebContent Title");

		LanguagePortlet.selectLanguagePG(
			locale = "fr_FR",
			textIcon = "français-France");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "WC contenu WebContent",
			webContentTitle = "WC WebContent Titre");

		WebContentDisplayPortletNavigator.gotoEdit(
			menuItem = "Modifier le contenu de Web",
			webContentTitle = "WC WebContent Titre");

		PortletEntry.changeLocale(locale = "fr-FR");

		AssertTextEquals(
			locator1 = "TextInput#TITLE",
			value1 = "WC WebContent Titre");

		AssertTextEquals.assertValue(
			key_fieldFieldLabel = "Text",
			locator1 = "WCEditWebContent#TEXT_INPUT",
			value1 = "WC contenu WebContent");

		WebContent.viewStructureAndTemplateLocalization(
			panel = "Modèle par défaut",
			structureLocalizationName = "nom de la structure de wc",
			templateLocalizationName = "nom de la template de wc");

		Navigator.gotoSitePage(
			pageName = "Web Content Display Page",
			siteName = "Test Site Name");

		LanguagePortlet.selectLanguagePG(
			locale = "zh-CN",
			textIcon = "中文-中国");

		WebContentDisplayPortlet.viewContent(
			webContentContent = "WC WebContent Text",
			webContentTitle = "WC WebContent Title");

		WebContentDisplayPortletNavigator.gotoEdit(
			menuItem = "编辑 Web 内容",
			webContentTitle = "WC WebContent Title");

		WebContent.viewStructureAndTemplateLocalization(
			panel = "默认模板",
			structureLocalizationName = "wc 结构名称",
			templateLocalizationName = "wc 模板名称");

		Navigator.gotoSitePage(
			pageName = "Web Content Display Page",
			siteName = "Test Site Name");

		LanguagePortlet.selectLanguagePG(
			locale = "en_US",
			textIcon = "english-United States");
	}

}